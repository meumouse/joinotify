!function(e){"use strict";function t(t,s,o){var n="",a="",i="";"success"===t?(n="toast-success",a="bg-success text-white",i='<svg class="icon icon-white me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M9.999 13.587 7.7 11.292l-1.412 1.416 3.713 3.705 6.706-6.706-1.414-1.414z"></path></svg>'):"error"===t?(n="toast-danger",a="bg-danger text-white",i='<svg class="icon icon-white me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M11 11h2v6h-2zm0-4h2v2h-2z"></path></svg>'):(n="toast-secondary",a="bg-secondary text-white",i="");var r="toast-"+Math.random().toString(36).substr(2,9),l=`<div id="${r}" class="toast ${n} show">\n\t\t\t<div class="toast-header ${a}">\n\t\t\t\t${i}\n\t\t\t\t<span class="me-auto">${s}</span>\n\t\t\t\t<button class="btn-close btn-close-white ms-2 hide-toast" type="button" data-bs-dismiss="toast" aria-label="${joinotify_license_params.arial_label_toasts}"></button>\n\t\t\t</div>\n\t\t\t<div class="toast-body">${o}</div>\n\t\t</div>`;e("#joinotify_license_area").prepend(l),setTimeout((function(){e("#"+r).fadeOut("fast")}),3e3),setTimeout((function(){e("#"+r).remove()}),3500)}jQuery(document).ready((function(e){e("#joinotify_active_license").on("click",(function(s){s.preventDefault();var o=e(this),n=o.width(),a=o.height(),i=o.html(),r=e("#joinotify_license_key").val();o.width(n),o.height(a),e.ajax({url:joinotify_license_params.ajax_url,method:"POST",data:{action:"joinotify_active_license",license_key:r},beforeSend:function(){o.prop("disabled",!0).html('<span class="spinner-border spinner-border-sm"></span>')},success:function(e){try{"success"===e.status?(t("success",e.toast_header_title,e.toast_body_title),setTimeout((function(){location.reload()}),1e3)):t("error",e.toast_header_title,e.toast_body_title)}catch(e){console.log(e)}},complete:function(){o.prop("disabled",!1).html(i)},error:function(e,t,s){alert("AJAX error: "+s)}})}))})),jQuery(document).ready((function(e){e("#joinotify_deactive_license").on("click",(function(s){if(s.preventDefault(),confirm(joinotify_license_params.confirm_deactivate_license)){var o=e(this),n=o.width(),a=o.height(),i=o.html();o.width(n),o.height(a),e.ajax({url:joinotify_license_params.ajax_url,method:"POST",data:{action:"joinotify_deactive_license"},beforeSend:function(){o.prop("disabled",!0).html('<span class="spinner-border spinner-border-sm"></span>')},success:function(e){try{"success"===e.status?(t("success",e.toast_header_title,e.toast_body_title),setTimeout((function(){location.reload()}),1e3)):t("error",e.toast_header_title,e.toast_body_title)}catch(e){console.log(e)}},complete:function(){o.prop("disabled",!1).html(i)},error:function(e,t,s){alert("AJAX error: "+s)}})}}))})),jQuery(document).ready((function(e){function s(s,o){if(s){var n=s.name,a=new FormData;a.append("action","joinotify_alternative_activation_license"),a.append("file",s),o.children(".file-list").removeClass("d-none").text(n),o.addClass("file-processing"),o.append('<div class="spinner-border"></div>'),e.ajax({url:joinotify_license_params.ajax_url,type:"POST",data:a,processData:!1,contentType:!1,beforeSend:function(){},success:function(s){joinotify_license_params.debug_mode&&console.log(s);try{"success"===s.status?(t("success",s.toast_header_title,s.toast_body_title,e("#joinotify_license_area")),o.addClass("file-uploaded").removeClass("file-processing"),o.children(".spinner-border").remove(),o.append('<div class="upload-notice d-flex flex-column align-items-center"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="#22c55e" d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path fill="#22c55e" d="M9.999 13.587 7.7 11.292l-1.412 1.416 3.713 3.705 6.706-6.706-1.414-1.414z"></path></svg><span>'+s.dropfile_message+"</span></div>"),o.children(".file-list").addClass("d-none"),setTimeout((function(){location.reload()}),1e3)):(t("error",s.toast_header_title,s.toast_body_title,e("#joinotify_license_area")),o.addClass("invalid-file").removeClass("drag-over file-processing"),o.children(".spinner-border").remove(),o.children(".drag-text").removeClass("d-none"),o.children(".drag-and-drop-file").removeClass("d-none"),o.children(".upload-license-key").removeClass("d-none"),o.children(".file-list").addClass("d-none"))}catch(e){console.log(e)}},error:function(e,t,s){o.addClass("fail-upload").removeClass("file-processing"),console.log("Error on upload file"),console.log(e.responseText)},complete:function(){}})}}e("#license_key_zone").on("dragover dragleave",(function(t){t.preventDefault(),e(this).toggleClass("drag-over","dragover"===t.type)})),e("#license_key_zone").on("drop",(function(t){t.preventDefault();var o=t.originalEvent.dataTransfer.files[0];e(this).hasClass("file-uploaded")||s(o,e(this))})),e("#upload_license_key").on("change",(function(t){s(t.target.files[0],e(this).parents(".dropzone-license"))}))}))}(jQuery);